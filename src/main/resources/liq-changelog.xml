<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

  <preConditions>
    <dbms type="mysql"/>

  </preConditions>

  <changeSet id="001" author="yaroslav">
    <createTable tableName="robots">
      <column name="id" autoIncrement="true" type="INT">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="name" type="VARCHAR(90)">
        <constraints nullable="true"/>
      </column>
      <column name="model" type="VARCHAR(80)">
        <constraints nullable="true"/>
      </column>
      <column name="IMEI" type="VARCHAR(80)">
        <constraints nullable="true"/>
      </column>
    </createTable>
    <createIndex tableName="robots" indexName="idx_robot_id" unique="true">
      <column name="id"/>
    </createIndex>
  </changeSet>
  <changeSet id="002" author="yaroslav">
    <createTable tableName="hands">
      <column name="id" autoIncrement="true" type="INT">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="model" type="VARCHAR(80)">
        <constraints nullable="true"/>
      </column>
      <column name="color" type="VARCHAR(80)">
        <constraints nullable="true"/>
      </column>
      <column name="made_in" type="VARCHAR(80)">
        <constraints nullable="true"/>
      </column>
      <column name="IMEI" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="is_present" type="BOOLEAN" defaultValue="true">
        <constraints nullable="true"/>
      </column>
      <column name="robot_id" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="003" author="yarolsav">
    <update tableName="hands">
      <column name="is_present" value="true"/>
    </update>
  </changeSet>
  <changeSet id="004" author="yaroslav">
    <addForeignKeyConstraint
      baseTableName="hands"
      baseColumnNames="robot_id"
      constraintName="fk_hand"
      referencedTableName="robots"
      referencedColumnNames="id"
      onDelete="CASCADE"
      onUpdate="CASCADE"/>
  </changeSet>
  <changeSet id="005" author="yaroslav">
    <insert tableName="robots">
      <column name="name" value="optimus"/>
      <column name="model" value="homeworker"/>
      <column name="IMEI" value="0000011"/>
    </insert>
  </changeSet>
  <changeSet id="006" author="yaroslav">
    <insert tableName="hands">
      <column name="model" value="samsung"/>
      <column name="color" value="red"/>
      <column name="made_in" value="Japan"/>
      <column name="IMEI" value="0000001"/>
      <column name="robot_id" value="1"/>
    </insert>
  </changeSet>
</databaseChangeLog>